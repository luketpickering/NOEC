<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>NOEC</title>
    <link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="style.css">
    <script src="d3.v7.min.js"></script>
    <script type="module">

// Declare the UI dimensions and margins.
const width = 1920;
const height = 1080;

// Create the SVG container.
const svg = d3.create("svg")
    .attr("width", width)
    .attr("height", height);

var ui_structure = svg.append("g").attr("class", "ui_structure");

var draw_line = (parent, data) => {
  const line = d3.line();
  return parent.append("path")
    .attr("d", line(data))
    .attr("class", "ui structure");
};

var draw_rect = (parent, data, cls=null) => {
  const path = d3.path();
  path.rect(data.x, data.y, data.w, data.h);
  var p = parent.append("path")
    .attr("d", path.toString());
  if(cls){
    p.attr("class", cls);
  }
  return p;
};

var text = (parent, x, y, text, cls=null) => {
  var txt = parent.append("text");
  txt.attr("x", x);
  txt.attr("y", y);
  txt.text(text);
  if(cls){
    txt.attr("class", cls);
  }
  return txt;
};

const mode_button_width = 240;
const mode_button_height = 80

var draw_mode_choice = (i, label, chosen = false) => {
  var mode_label = svg.append("g").attr("id",`mode-label-${label}`);
  const lanchor = i*(mode_button_width+4);
  draw_rect(mode_label, {x:lanchor,y:0,w:mode_button_width,h:mode_button_height},"ui mode-choice");
  text(mode_label, lanchor + 0.5*mode_button_width,40,label, "ui mode-label");
  draw_line(mode_label, [[lanchor + mode_button_width + 2,0], [lanchor + mode_button_width + 2, mode_button_height]]);
}

draw_mode_choice(0, "Simple");
draw_mode_choice(1, "Advanced", true);
draw_mode_choice(2, "Demo");

draw_line(ui_structure, [[0,80], [1920, 80]]);
draw_line(ui_structure, [[0,1000], [1920, 1000]]);
draw_line(ui_structure, [[0,380], [1920, 380]]);

// Append the SVG element.
container.append(svg.node());

    </script>

    <script type="module">
const websocket = new WebSocket("ws://localhost:5678/");
websocket.onmessage = ({data}) => {
  console.log(data);
};
    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</html>
